# VFDShield_for_IV-21

![VFD Shield for IV-21 動作写真](https://github.com/hayasita/VFDShield_for_IV-21/blob/images/images/iv21Shield101_3.jpg)

![VFD Shield for IV-21 キット完成写真](https://github.com/hayasita/VFDShield_for_IV-21/blob/images/images/iv21Shield101_KitFront.jpg)

## 1． VFD Shield for IV-21 とは
　Arduino UNOまたはMega328を使用している互換機で動作するシールドです。  
　8桁の数字と記号表示1桁を持つ蛍光表示管とリアルタイムクロックIC、操作用のタクトスイッチ3個を搭載しています。  
　[プロジェクトページ](http://www.junkyard.jp/labo/vfd_clock/vfd_shield_for_iv21/index.html)

## 2．操作方法

　電源ONまたはリセットを行うことで、Shieldの初期化を行います。  
　初期化では、CPU内部のEEPROMに保存されている設定情報を読み込んで展開します。  
　設定情報が見つからない、または破損している場合は、設定の初期値をEEPROMに設定します。  

　シールドの動作は「表示モード」と「設定モード」の二つの状態があります。  
　初期化終了後は、「表示モード」となります。  
　この二つのモードは、SW1を長押しすることで切り替えることができます。  
　「表示モード」では、表示部の左端に「●」が表示、もしくは点滅表示します。  
　「設定モード」では、表示部の左端に「ー」が表示、もしくは点滅表示します。  

　「表示モード」には、「時計表示」と「カレンダー表示」の表示状態があります。  
　表示は、SW2かSW3を短押しすることで切り替えることができます。  
　いずれの表示状態でも、SW1を長押しすることで、「設定モード」への変更が可能です。  

　「設定モード」では、Shield動作の各種設定を行うことができます。  
　設定モードのどのような状態でも、SW1を長押しすることで「表示モード」に切り替えることができます。  
　ただし、設定値は設定確定の操作を行わないと記録されず、動作に反映しません。  
　「設定モード」では、以下の動作設定を行うことができます。  
　「1.時刻設定」  
　「2.カレンダー設定」  
　「3.12h/24h表示切替」  
　「4.クロスフェード時間設定」  
　「5.VFD輝度調整」  
　1～5の動作設定は、SW2短押しで順送り、SW3短押しで逆送りに選択できます。  
　動作設定のタイトル表示時は、表示部の左端の「－」が表示されます。このときにSW1短押しすることで動作設定操作が可能となります。  
　動作設定操作可能なときは、表示部の左端の「－」表示が点滅します。  
1.時刻設定  
　「時」が点滅しているとき、SW2短押しでプラス、SW3短押しでマイナスすることができます。  
　SW1を短押しすると確定し、「分」が点滅します。同様にSW2短押しでプラス、SW3短押しでマイナスすることができます。  
　SW1を短押しすることで、設定が確定してタイトル表示に戻ります。  

2.カレンダー設定  
　「年」が点滅しているとき、SW2短押しでプラス、SW3短押しでマイナスすることができます。  
　SW1を短押しすると確定し、「月」が点滅します。同様にSW2短押しでプラス、SW3短押しでマイナスすることができます。  
　SW1を短押しすると確定し、「日」が点滅します。同様にSW2短押しでプラス、SW3短押しでマイナスすることができます。  
　SW1を短押しすることで、設定が確定してタイトル表示に戻ります。  

3.12h/24h表示切替  
　「12ｈ」と「24h」の表示がSW2,SW3短押しで切り替わります。  
　SW1を短押しすることで、設定が確定してタイトル表示に戻ります。  

4.クロスフェード時間設定  
　「0」~「9」の表示がSW2,SW3短押しで切り替わります。数値でクロスフェード時間が設定できます。クロスフェードの時間は、数値×100msとなります。  
　点滅動作に、表示している数値でのクロスフェード動作が反映されます。  
　SW1を短押しすることで、設定が確定してタイトル表示に戻ります。  

5.VFD輝度調整  
　「88888888」が表示されます。ピリオドが点滅している桁の輝度を、SW2でプラス、SW3短押しでマイナスすることができます。  
　SW1を短押しすることで、ピリオドを順送りに移動させることができ、任意の桁の輝度設定値を調整することができます。  
輝度設定値の調整は、15段階で調整が可能です。  
　SW2またはSW3を長押しすることで、輝度設定値を1~Fの値で表示することができます。  
　輝度設定値表示中は、表示部の左端の「－」が2拍で点滅します。  
　もう一度SW2またはSW3を長押しすることで、輝度調整に戻ることができます。  
　輝度設定値表示中に、SW1を短押しすることで、設定が確定してタイトル表示に戻ります。  
